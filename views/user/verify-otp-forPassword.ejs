<%-include("../partials/user-loginHeader.ejs")-%>

<body style="height: 100vh; background: linear-gradient(to right, #575352, #650780)">
    <div class="container">
        <div class="signin-content">
            <div class="signin-image">
                <figure><img src="userAssets/images/signin-image.jpg" alt="sing up image" /></figure>
            </div>

            <div class="signin-form">
                <h2 class="form-title">Verify OTP</h2>
                <form action="/verify-mobile" method="post" class="register-form">
                    <div class="form-group">
                        <label for="your_pass"><i class="zmdi zmdi-lock"></i></label>
                        <input type="tel" name="code" id="mobile" placeholder="otp" />
                    </div>
                    <input type="tel" name="mobile" id="mobile" placeholder="otp" value="<%=locals.mobile%>" style="display: none;" />
                    <div class="form-group">
                      
                    <a href="/resendOTP/" type="submit"
                      >Resend OTP</a
                    >
                  </label>
                    </div>
                    

                    <div class="form-group form-button">
                        <input type="submit" class="loginform-submit" value="Verify OTP" />
                    </div>
                    
                </form>
            </div>
        </div>
    </div>
</body>

<%-include("../partials/user-loginFooter.ejs")-%>

<script>
    // Set the time limit for the OTP verification (in seconds)
    const timeLimit = 60;
  
    // Get the countdown timer element
    const countdownTimer = document.getElementById("countdown-timer");
  
    // Initialize the timer value
    let timerValue = timeLimit;
  
    // Update the timer value every second
    const countdownInterval = setInterval(() => {
      timerValue--;
      const minutes = Math.floor(timerValue / 60);
      const seconds = timerValue % 60;
      countdownTimer.innerHTML = `Time Left: ${minutes}:${seconds
        .toString()
        .padStart(2, "0")}`;
  
      // If the timer reaches zero, clear the interval and disable the form
      if (timerValue === 0) {
        clearInterval(countdownInterval);
        document.getElementById("loginotp").disabled = true;
        document.querySelector('button[type="submit"]').disabled = true;
        countdownTimer.innerHTML = "Time's up!";
      }
    }, 1000);
  </script>